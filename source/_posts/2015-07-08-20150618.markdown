---
layout: post
title: "在远程服务器上运行exportData"
date: 2015-07-08 14:03:04 +0800
comments: true
categories: 
---

#####将数据库放到服务器上
######事先的工作
已有一个docker容器oracle11g xe，22端口映射到32772，1521端口映射到32771，8080端口映射到32770。
######putty
登录114.212.189.143 port32772

	sqlplus sys/oracle as sysdba
	create user east identified by east;
	create user etl identified by etl;
	grant dba to east;
	grant dba to etl;
	shutdown immediate
	STARTUP MOUNT
	ALTER SYSTEM ENABLE RESTRICTED SESSION
	ALTER SYSTEM SET JOB_QUEUE_PROCESSES=0
	ALTER SYSTEM SET AQ_TM_PROCESSES=0
	ALTER DATABASE OPEN
	ALTER DATABASE CHARACTER SET INTERNAL_USE ZHS16GBK
	SHUTDOWN IMMEDIATE
	STARTUP
	
######psftp
open 114.212.189.143 32772

	put 路径\east.dmp
	put 路径\east.dmp

#####将应用放到服务器上
######事先的工作
已有一个docker容器java8，id是fbbf...
将exportData打成jar包，取名ccc.jar

######psftp

	open 114.212.189.143 22
	put ccc.jar

######putty
登录114.212.189.143 port22

	sudo docker exec -ti fbbf /bin/bash
	java -jar ccc.jar

######应用卡住，然后报错

	org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'http://www.springframework.org/schema/beans/spring-beans-2.0.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>.
参考http://blog.csdn.net/bluishglc/article/details/7596118 ，spring xml配置文件中指定的xsd文件读取不到了，原因是reference中不同jar包对spring-beans-2.0.xsd的多次定义。
spring在加载xsd文件时总是先试图在本地查找xsd文件(spring的jar包中已经包含了所有版本的xsd文件)，如果没有找到，才会转向去URL指定的路径下载。
dwr.jar中无用的xsd定义覆盖了有用的定义，导致需要上网加载xsd文件。先前本机由于联网，该问题没有暴露，容器没有网络连接，所以报错。
解决方法，删除dwr.jar包。目前exportData正常运行，对以后可能的影响未知。