<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[My Octopress Blog]]></title>
  <link href="http://chrisforest.github.io/atom.xml" rel="self"/>
  <link href="http://chrisforest.github.io/"/>
  <updated>2015-06-25T13:03:46+08:00</updated>
  <id>http://chrisforest.github.io/</id>
  <author>
    <name><![CDATA[Your Name]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[记录20150624]]></title>
    <link href="http://chrisforest.github.io/blog/2015/06/24/ji-lu-20150624/"/>
    <updated>2015-06-24T22:52:08+08:00</updated>
    <id>http://chrisforest.github.io/blog/2015/06/24/ji-lu-20150624</id>
    <content type="html"><![CDATA[<p>  这两天主要是在进行从oracle数据库到mongoDB数据库的迁移工作。小表可以顺利插入，但是那张大表遇到了问题。首先我尝试了使用etl工具进行数据迁移。出现问题后自己写程序进行数据迁移，但是问题还没解决。
关于spoon的用法，首先搭建如图的结构。表输入为oracle数据库表，mongoDB output为mongoDB数据库的输出。<br/>
<img src="http://chrisforest.github.io/images/20150624/pic1.jpg" alt="image" /><br/>
  然后分别编辑输入输出，编辑oracle数据库:
<img src="http://chrisforest.github.io/images/20150624/pic2.jpg" alt="image" /><br/>
  编辑mongoDB数据库:
<img src="http://chrisforest.github.io/images/20150624/pic3.jpg" alt="image" /><br/>
  编辑完成后开始运行，但是运行到84万多条数据的时候就报错了：<br/>
<img src="http://chrisforest.github.io/images/20150624/pic4.png" alt="image" /><br/>
  之后编写了程序进行数据迁移，结果在83万多数据的时候出问题，卡住不动了，没有终止运行，没有报错。
  分析原因一开始我以为是mongodb的cursor关闭了，因为看文档说mongodb的cursor默认十分钟关闭，而spoon迁移大概10分钟的时候停了。因为spoon没有改相关项的选项，所以后来打算自己写程序，然而自己写程序后，发现用不到mongodb的cursor。可能的原因是数据一次读取过多，因为2次出错读取的数据差不多多（83万和84万），所以下一步会尝试分多次读取数据，比如50万数据一读。
  6月25日找到原因了，是mongodb32位存储空间不足。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Test]]></title>
    <link href="http://chrisforest.github.io/blog/2015/06/15/test/"/>
    <updated>2015-06-15T13:43:59+08:00</updated>
    <id>http://chrisforest.github.io/blog/2015/06/15/test</id>
    <content type="html"><![CDATA[
]]></content>
  </entry>
  
</feed>
